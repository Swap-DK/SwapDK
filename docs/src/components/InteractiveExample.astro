---
// @ts-nocheck
/* eslint-disable */
// biome-ignore format: Astro template variables
// biome-ignore lint: Astro template variables
const props = Astro.props;
const showCopyButton = props.showCopyButton ?? true;
---

<div class="interactive-example">
  <div class="interactive-header">
    <h3 class="interactive-title">{props.title}</h3>
    {props.description && <p class="interactive-description">{props.description}</p>}
  </div>
  
  <div class="interactive-content">
    <slot />
  </div>
  
  <div class="interactive-actions">
    <div class="playground-links">
      {props.playgroundUrl && (
        <a 
          href={props.playgroundUrl} 
          target="_blank" 
          rel="noopener noreferrer"
          class="playground-btn primary-btn"
        >
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
            <path d="M2 17l10 5 10-5"/>
            <path d="M2 12l10 5 10-5"/>
          </svg>
          Try Live Demo
        </a>
      )}
      
      {props.stackblitzUrl && (
        <a 
          href={props.stackblitzUrl} 
          target="_blank" 
          rel="noopener noreferrer"
          class="playground-btn"
        >
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M10.9 2L5.7 12.7h4.5l-.6 7.5L15.3 11H10.9z"/>
          </svg>
          StackBlitz
        </a>
      )}
      
      {props.codesandboxUrl && (
        <a 
          href={props.codesandboxUrl} 
          target="_blank" 
          rel="noopener noreferrer"
          class="playground-btn"
        >
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
            <polyline points="7.5,4.21 12,6.81 16.5,4.21"/>
            <polyline points="7.5,19.79 7.5,14.6 3,12"/>
            <polyline points="21,12 16.5,14.6 16.5,19.79"/>
            <polyline points="3.27,6.96 12,12.01 20.73,6.96"/>
            <line x1="12" y1="22.08" x2="12" y2="12"/>
          </svg>
          CodeSandbox
        </a>
      )}
      
      {props.githubUrl && (
        <a 
          href={props.githubUrl} 
          target="_blank" 
          rel="noopener noreferrer"
          class="playground-btn"
        >
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0C5.37 0 0 5.37 0 12 0 17.31 3.435 21.795 8.205 23.385c.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/>
          </svg>
          GitHub
        </a>
      )}
    </div>
    
    {showCopyButton && (
      <button 
        class="copy-btn" 
        data-copy-target="interactive-code"
        title="Copy code to clipboard"
      >
        <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
        </svg>
        <svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="display: none;">
          <polyline points="20,6 9,17 4,12"/>
        </svg>
        <span class="copy-text">Copy</span>
      </button>
    )}
  </div>
</div>

<script is:inline>
document.addEventListener('DOMContentLoaded', function() {
  const copyButtons = document.querySelectorAll('.copy-btn');
  
  copyButtons.forEach(function(button) {
    button.addEventListener('click', async function() {
      const target = this.getAttribute('data-copy-target');
      let textToCopy = '';
      
      if (target === 'interactive-code') {
        const closest = this.closest('.interactive-example');
        const codeElement = closest ? closest.querySelector('pre code') : null;
        textToCopy = codeElement ? codeElement.textContent || '' : '';
      } else if (target) {
        const targetElement = document.querySelector('[data-copy-id="' + target + '"]');
        textToCopy = targetElement ? targetElement.textContent || '' : '';
      }
      
      try {
        await navigator.clipboard.writeText(textToCopy);
        
        const copyIcon = this.querySelector('.copy-icon');
        const checkIcon = this.querySelector('.check-icon');
        const copyText = this.querySelector('.copy-text');
        
        if (!copyIcon || !checkIcon || !copyText) return;
        
        copyIcon.style.display = 'none';
        checkIcon.style.display = 'inline';
        copyText.textContent = 'Copied!';
        
        setTimeout(function() {
          copyIcon.style.display = 'inline';
          checkIcon.style.display = 'none';
          copyText.textContent = 'Copy';
        }, 2000);
        
      } catch (err) {
        console.error('Failed to copy text: ', err);
      }
    });
  });
});
</script>

<style>
.interactive-example {
  background: var(--sl-color-bg-nav);
  border: 1px solid var(--sl-color-hairline);
  border-radius: 0.5rem;
  margin: 2rem 0;
  overflow: hidden;
}

.interactive-header {
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--sl-color-hairline);
  background: var(--sl-color-bg-sidebar);
}

.interactive-title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--sl-color-text);
}

.interactive-description {
  margin: 0.5rem 0 0 0;
  color: var(--sl-color-text-accent);
  font-size: 0.9rem;
}

.interactive-content {
  padding: 0;
}

.interactive-content :global(pre) {
  margin: 0 !important;
  border-radius: 0;
  border: none;
  background: var(--sl-color-bg-sidebar) !important;
}

.interactive-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: var(--sl-color-bg-nav);
  border-top: 1px solid var(--sl-color-hairline);
  flex-wrap: wrap;
  gap: 1rem;
}

.playground-links {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.playground-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: var(--sl-color-bg-sidebar);
  color: var(--sl-color-text);
  text-decoration: none;
  border-radius: 0.375rem;
  border: 1px solid var(--sl-color-hairline);
  font-size: 0.875rem;
  font-weight: 500;
  transition: all 0.2s ease;
}

.playground-btn:hover {
  background: var(--sl-color-bg-accent);
  color: var(--sl-color-white);
  transform: translateY(-1px);
}

.playground-btn.primary-btn {
  background: var(--sl-color-accent);
  color: var(--sl-color-white);
  border-color: var(--sl-color-accent);
}

.playground-btn.primary-btn:hover {
  background: var(--sl-color-accent-high);
  border-color: var(--sl-color-accent-high);
}

.copy-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: transparent;
  color: var(--sl-color-text-accent);
  border: 1px solid var(--sl-color-hairline);
  border-radius: 0.375rem;
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s ease;
}

.copy-btn:hover {
  background: var(--sl-color-bg-accent);
  color: var(--sl-color-text);
  border-color: var(--sl-color-accent);
}

.icon {
  width: 1rem;
  height: 1rem;
  flex-shrink: 0;
}

.copy-icon,
.check-icon {
  width: 1rem;
  height: 1rem;
  stroke-width: 2;
}

@media (max-width: 768px) {
  .interactive-actions {
    flex-direction: column;
    align-items: stretch;
  }
  
  .playground-links {
    justify-content: center;
  }
  
  .copy-btn {
    justify-content: center;
  }
}
</style>